{"version":3,"sources":["../lib/parsers.js"],"names":["value","src","dest","key","defaultValue","memo","data","set","name","memoValue","dataKey","has","get","exclude","tpl","path","pathExpression"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AAEO,IAAMA,wBAAQ,SAARA,KAAQ;AAAA,SAAgB,UAACC,GAAD,EAAMC,IAAN,EAAYC,GAAZ,EAAoB;AACvDD,SAAKC,GAAL,IAAY,OAAOF,GAAP,KAAe,WAAf,GAA6BG,YAA7B,GAA4CH,GAAxD;AACD,GAFoB;AAAA,CAAd;;AAIA,IAAMI,sBAAO,SAAPA,IAAO;AAAA,SAAQ,UAACJ,GAAD,EAAMC,IAAN,EAAYC,GAAZ,EAAiBG,IAAjB,EAA0B;AACpDA,SAAKC,GAAL,WAAiBC,IAAjB,EAAyBP,GAAzB;AACD,GAFmB;AAAA,CAAb;;AAIA,IAAMQ,gCAAY,SAAZA,SAAY,CAACD,IAAD,EAAOJ,YAAP,EAAwB;AAC/C,MAAIM,oBAAkBF,IAAtB;;AAEA,SAAO,UAACP,GAAD,EAAMC,IAAN,EAAYC,GAAZ,EAAiBG,IAAjB,EAA0B;AAC/BJ,SAAKC,GAAL,IAAYG,KAAKK,GAAL,CAASD,OAAT,IAAoBJ,KAAKM,GAAL,CAASF,OAAT,CAApB,GAAwCN,YAApD;AACD,GAFD;AAGD,CANM;;AAQA,IAAMS,4BAAU,SAAVA,OAAU;AAAA,SAAO,UAACZ,GAAD,EAAMC,IAAN,EAAYC,GAAZ,EAAiBG,IAAjB,EAA0B;AACtD,0BAAUQ,GAAV,EAAeb,GAAf,EAAoBK,IAApB;AACD,GAFsB;AAAA,CAAhB;;AAIA,IAAMS,sBAAO,SAAPA,IAAO;AAAA,SAAkB,UAACd,GAAD,EAAMC,IAAN,EAAYC,GAAZ,EAAoB;AACxDD,SAAKC,GAAL,IAAY,mBAASH,KAAT,CAAeC,GAAf,EAAoBe,cAApB,CAAZ;AACD,GAFmB;AAAA,CAAb","file":"parsers.js","sourcesContent":["import jsonpath from 'jsonpath';\nimport {transform} from './xform';\n\nexport const value = defaultValue => (src, dest, key) => {\n  dest[key] = typeof src === 'undefined' ? defaultValue : src;\n};\n\nexport const memo = name => (src, dest, key, data) => {\n  data.set(`memo.${name}`, src);\n};\n\nexport const memoValue = (name, defaultValue) => {\n  let dataKey = `memo.${name}`;\n\n  return (src, dest, key, data) => {\n    dest[key] = data.has(dataKey) ? data.get(dataKey) : defaultValue;\n  };\n};\n\nexport const exclude = tpl => (src, dest, key, data) => {\n  transform(tpl, src, data);\n};\n\nexport const path = pathExpression => (src, dest, key) => {\n  dest[key] = jsonpath.value(src, pathExpression);\n};\n"]}